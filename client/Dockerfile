FROM node:20.16.0-alpine
WORKDIR /app

ARG NEXT_PUBLIC_SUPABASE_URL
ARG NEXT_PUBLIC_SUPABASE_ANON_KEY
ARG NEXT_PUBLIC_SERVER_CLIENT_URL

ENV NODE_ENV=development
ENV NEXT_PUBLIC_SUPABASE_URL=${NEXT_PUBLIC_SUPABASE_URL}
ENV NEXT_PUBLIC_SUPABASE_ANON_KEY=${NEXT_PUBLIC_SUPABASE_ANON_KEY}
ENV NEXT_PUBLIC_SERVER_CLIENT_URL=${NEXT_PUBLIC_SERVER_CLIENT_URL}

COPY package*.json ./

RUN npm install

COPY . .

CMD ["npm", "run", "dev"]